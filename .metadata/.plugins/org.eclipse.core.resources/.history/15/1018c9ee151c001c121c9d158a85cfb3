package questao.cinco;

import java.util.Scanner;

public class QuestaoCinco {

	public static void main(String[] args) {
		int qntContas=1, dec=0, i, validando=0, validando2=0, j=1;
		String cnt = "", cntv = "", nomeP="", nomenovo;
		Scanner teclado = new Scanner(System.in);
		Conta []ppls = new Conta[qntContas];
		
		System.out.println("Digite qual a operação que deseja realizar!");
		System.out.println("(Por exemplo, digite 1 para criar uma conta!)");
		System.out.printf("1 - Criar Conta\n2 - Sacar Dinheiro\n3 - Depositar Dinheiro\n4 - Sair\n");
		
		while(j!=0) {
		switch(teclado.nextInt()) {
			case 1: {
				if (qntContas>1) {
					System.out.println("Já existe uma conta criada! Prosseguir?");
					System.out.println("1 - Sim\n2 - Não");
					dec = teclado.nextInt();
					if (dec == 1){
						qntContas++;
						System.out.println("Digite o nome do titular da nova conta!");
						ppls[qntContas].setNome(teclado.nextLine());
						ppls[qntContas].setNumeroConta(qntContas);
						break;
					} else {
						System.out.println("Nenhum procedimento realizado!"); break;
					}
				} else {
					System.out.println("Digite o nome do titular da nova conta!");
					nomenovo = teclado.nextLine();
					ppls[qntContas].setNome(nomenovo);
					ppls[qntContas].setNumeroConta(qntContas);
					break;
				}
			}
			case 2: {
				nomeP = ppls[qntContas].getNome();
				if (nomeP.length() == 0)
				{
					System.out.println("Crie uma conta para realizar saques!");					
					System.out.println("Digite o nome do titular da nova conta!");
					nomenovo = teclado.nextLine();
					ppls[qntContas].setNome(nomenovo);
					ppls[qntContas].setNumeroConta(qntContas);
					break;
				} else {
					System.out.println("Digite o número da conta para realizar o saque!");
					String str = String.format("%04d", teclado.nextInt());
					cnt = str;
					for(i=0; i<qntContas; i++) {
						cntv = ppls[i].getNumeroConta();
						if (cntv.contains(cnt)) {
							System.out.println("Digite a quantia para realizar o saque!");
							ppls[i].sacar(teclado.nextFloat());
							validando = 1;
							if (validando == 1) {
								validando = 0;
								validando2 = 1;
							}
						}
						
					}
					if(validando2 == 1) {
						validando2 = 0;
					} else {
						System.out.println("Conta não encontrada!");
					} break;
				}
 			}
			case 3: {
				nomeP = ppls[qntContas].getNome();
				if (nomeP.length() == 0)
				{
					System.out.println("Crie uma conta para realizar depositos!");					
					System.out.println("Digite o nome do titular da nova conta!");
					ppls[qntContas].setNome(teclado.nextLine());
					ppls[qntContas].setNumeroConta(qntContas);
					break;
				} else {
					System.out.println("Digite o número da conta para realizar o depósito!");
					String str = String.format("%04d", teclado.nextInt());
					cnt = str;
					for(i=0; i<qntContas; i++) {
						cntv = ppls[i].getNumeroConta();
						if (cntv.contains(cnt)) {
							System.out.println("Digite a quantia para realizar o depósito!");
							ppls[i].depositar(teclado.nextFloat());
							validando = 1;
							if (validando == 1) {
								validando = 0;
								validando2 = 1;
							}
						}
						
					}
					if(validando2 == 1) {
						validando2 = 0;
					} else {
						System.out.println("Conta não encontrada!");
					} break;
				}
 			}
		case 4: {
			System.out.println("Operações finalizadas!");
			j=0;
			break;
		}
		default: System.out.println("Opção inválida!");
		}
		}
	}
}
